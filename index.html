<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
         <title>Working Title</title>
    <link rel="stylesheet" href="styles.css"> 
</head>    

<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>


<body>
  <h1>LATIHAN</h1>


  <select id="LessonSelector">
  </select> 
    

  <h2></h2>
    <div class="headerContainer">
  <div>
    <button class="headerText" onclick="homeButton()" style="font-size: 85%; font-variation-settings: 'wght'400; background-color: #00000000; border:none; cursor: pointer;">
      <i class="fa-solid fa-house" style="color:var(--accent-color); font-size: 75%; margin-right: 5px;"></i>
    </button>

</div>



<button class="headerText" onclick="cycleColorScheme()" style="font-size: 75%; font-variation-settings: 'wght'300; background-color: #00000000; border:none; cursor: pointer;">Ganti Tema</button>

    </div>
    <div class="chatContainer" id="mainContainer">
    <math-field readonly id="mfe">
      2 \times 2 \times 2 \times 2 \times 2 = \placeholder[x]{ } ^ \placeholder[y]{y}
    </math-field>

    </div>
   
    <div class="inputContainer">
    <!---  <input id="inputMsg"  onkeypress="handleEnter(event)" placeholder="Jawab" autocomplete="off" autofocus> -->
      <button id="soalBaru"  onclick="soalBaru()">
        Soal Baru
        <i class="fa-solid fa-shuffle"></i></button>
      <button id="cekButton"  onclick="sendInput()">
        Cek Jawaban
        <i class="fa-solid fa-right-long"></i></button>
       <!-- <button id="sendMsg"  onclick="scrollToLastDivider()">
            <i class="fa fa-circle-arrow-up"></i> 
      </button>-->
    </div>

    
    <div id="toast" class="toast"></div>
    <div style="display:none">
    <form name="sendForm" ><input id="formInput" name="email"></form> <button onclick="submitForm()">Lalala</button>
    </div>

  
  
  <!--<script src="main.js"></script>-->
  <script src="https://cdn.jsdelivr.net/npm/mathlive"></script>
  

<script>
  let  q = {};
  let state = "";
 
  /*THEME*/
  currentScheme = 0;
  cycleColorScheme();
  function cycleColorScheme() {
    const root = document.documentElement;
    root.classList.remove(`scheme-${currentScheme}`);

    currentScheme++;
    if (currentScheme > 4) {
      currentScheme = 1; 
    }

    root.classList.add(`scheme-${currentScheme}`);
  }
  
  function getIntegerNZ(min, max) {
    let randomNum;
    do {
        randomNum = getInteger(min,max);
    } while (randomNum === 0);
    return randomNum;
}


function getInteger(min,max){
    let randomNuml
    randomNum = Math.floor(Math.random() * (max - min + 1)) + min;
    return randomNum;
}



  /*URL PARAM*/
  /*
  const urlParams = new URLSearchParams(window.location.search);
  const rawParams = urlParams.get('q')


  const subchapterTitle = rawParams.split('.')[1].toUpperCase();
  const h1 = document.querySelector("h2");
  h1.textContent += ` ${subchapterTitle}`;
  url = rawParams.replace(/\s/g, '');
*/
mathVirtualKeyboard.layouts = ["numeric-only"];


  const accordionData = [
   {
    title: "Bilangan Berpangkat",
    function: "BBPengertian"
    },
    
    {
    title: "Perkalian Bilangan Berpangkat",
    function: "BBKali"
    }
    ,
    {
    title: "Pembagian Bilangan Berpangkat",
    function: "BBBagi"
    }
    
    /*,
    {
    title: "Pangkat Bilangan Pecahan",
    function: "BBPangkat Pecahan"
    }
  */,
    {
    title: "Bentuk Akar Kuadrat",
    function: "BBAkar"
    }
  ,
    {
    title: "Perkalian Bentuk Akar",
    function: "BBKaliAkar"
    }
    ,
    {
    title: "Pembagian Bentuk Akar",
    function: "BBBagiAkar"
    },
    
    {
    title: "Kelipatan Bilangan Kuadrat",
    function: "BBKelipatan"
    },
    /*
    {
    title: "Menyederhanakan Bentuk Akar",
    function: "BBMenyederhanakan"
    }*/
    // ... more sections
  ];

  const mySelect = document.getElementById("LessonSelector");
  accordionData.forEach(item => {
  const option = document.createElement("option");
  option.value = item.function
  option.textContent = item.title;
  mySelect.appendChild(option);
  });

function homeButton(){
mainContainer = document.getElementById("mainContainer");
mainContainer.innerHTML = "";
const homeContainer = document.createElement("div");
homeContainer.className="homeContainer";
accordionData.forEach(item => {
const button = document.createElement("button");
  //option.value = item.function
  button.textContent = item.title.toUpperCase();

 button.onclick = () => {
  mySelect.value = item.function;
  soalBaru();
  }



  
  homeContainer.appendChild(button);
  });

  mainContainer.appendChild(homeContainer)
  
}

homeButton();

function attachKeyboardHandler(mf) {
  mf.addEventListener('focus', () => {
    mf.executeCommand('showVirtualKeyboard');
  });
}
  
 mySelect.addEventListener("change", function () {
    state = mySelect.value;            
    soalBaru();

        });


function BBPengertian(){
  q.a = getInteger(2,9);
  q.b = getInteger(2,5);
  q.value = q.a;
  for (let i = 0; i < q.b-1; i++) {
    q.value += "\\times"+q.a;
  }
  document.getElementById("mainContainer").innerHTML="";
  createmf(`${q.value} = \\placeholder[x]{} ^ \\placeholder[y]{}`,"mf");
  };

function BBKali (){
  q.n = getInteger(2,9);
  q.a = getInteger(2,9);
  q.b = getInteger(2,5);
  q.value = `${q.n}^${q.a}\\times${q.n}^${q.b}`;
  
  document.getElementById("mainContainer").innerHTML="";
  createmf(`${q.value} = \\placeholder[x]{} ^ \\placeholder[y]{}`,"mf");
  }
  
  function BBBagi (){
  q.n = getInteger(2,9);
  q.a = getInteger(3,9);
  q.b = getInteger(2,q.a);
  q.value = `\\frac{${q.n}^${q.a}}{${q.n}^${q.b}}`;
  
  document.getElementById("mainContainer").innerHTML="";
  createmf(`${q.value} = \\placeholder[x]{} ^ \\placeholder[y]{}`,"mf");
  }

function BBAkar (){
  q.a = getInteger(2,9);
  q.value = `\\sqrt{${(q.a*q.a)}}`;
  
  document.getElementById("mainContainer").innerHTML="";
  createmf(`${q.value} = \\placeholder[x]{}`,"mf");
  }
  

  function BBKaliAkar (){
  q.a = getInteger(2,9);
  q.b = getInteger(2,5);
  q.value = `\\sqrt{${q.a}}\\times\\sqrt{${q.b}}`;
  
  document.getElementById("mainContainer").innerHTML="";
  createmf(`${q.value} = \\sqrt{\\placeholder[x]{}`,"mf");
  }

  function BBBagiAkar (){
  q.b = getInteger(3,9);
  q.a = getInteger(2,9)*q.b;
  q.value = `\\frac{\\sqrt{${q.a}}}{\\sqrt{${q.b}}}`;
  
  document.getElementById("mainContainer").innerHTML="";
  createmf(`${q.value} = \\sqrt{\\placeholder[x]{}}`,"mf");
  }

  function BBKelipatan (){
  q.a = getInteger(2,5);
  q.b = getInteger(2,6);
  sqrt=q.a*q.a;
  q.value = `${sqrt}\\times${q.b}`;
  
  document.getElementById("mainContainer").innerHTML="";
  createmf(`${q.value} = \\placeholder[x]{}`,"mf");
  }


function createmf(value,id){
  const mathField = document.createElement('math-field');
  mathField.setAttribute('readonly', '');
  mathField.id = id;
  mathField.value = value;
  document.getElementById("mainContainer").appendChild(mathField);

  
mf.mathVirtualKeyboardPolicy = "manual";

mf.addEventListener("focusin", () =>  mathVirtualKeyboard.show());
/*mf.addEventListener("focusout", () =>  mathVirtualKeyboard.hide());
*/
}


function sendInput(){
  window["cek"+mySelect.value]();
}

function cekBBPengertian(){
  const mfx = document.getElementById("mf");
  x = mfx.getPromptValue("x");
  y =mfx.getPromptValue("y");

  if (x == q.a && y == q.b){
     document.getElementById("cekButton").style.display = "none";
    document.getElementById("mainContainer").innerHTML=`Jawaban Kamu Benar`;
    createmf(`${q.value} = ${x} ^ ${y}`,"mf");
    
  } else{
      document.getElementById("mainContainer").innerHTML=`
    <p>Jawaban Kamu Belum Tepat</p>
    <p class="small-text">Coba Lagi</p>   
    `;
    createmf(`${q.value} = \\placeholder[x]{      } ^ \\placeholder[y]{     }`,"mf");

  }
}


function cekBBKali(){
  const mfx = document.getElementById("mf");
  x = mfx.getPromptValue("x");
  y =mfx.getPromptValue("y");


  if (x == q.n && y == (q.a+q.b)){
     document.getElementById("cekButton").style.display = "none";
    document.getElementById("mainContainer").innerHTML=`Jawaban Kamu Benar`;
    createmf(`${q.value} = ${x} ^ {${y}}`,"mf");
    
  } else{
      document.getElementById("mainContainer").innerHTML=`
    <p>Jawaban Kamu Belum Tepat</p>
    <p class="small-text">Coba Lagi</p>   
    `;
    createmf(`${q.value} = \\placeholder[x]{      } ^{\\placeholder[y]{     }}`,"mf");

  }
}

function cekBBBagi(){
  const mfx = document.getElementById("mf");
  x = mfx.getPromptValue("x");
  y =mfx.getPromptValue("y");

  if (x == q.n && y == (q.a-q.b)){
     document.getElementById("cekButton").style.display = "none";
    document.getElementById("mainContainer").innerHTML=`Jawaban Kamu Benar`;
    createmf(`${q.value} = ${x} ^ ${y}`,"mf");
    
  } else{
      document.getElementById("mainContainer").innerHTML=`
    <p>Jawaban Kamu Belum Tepat</p>
    <p class="small-text">Coba Lagi</p>   
    `;
    createmf(`${q.value} = \\placeholder[x]{      } ^ \\placeholder[y]{     }`,"mf");

  }
}

function cekBBAkar(){
  const mfx = document.getElementById("mf");
  x = mfx.getPromptValue("x");

  if (x == (q.a)){
     document.getElementById("cekButton").style.display = "none";
    document.getElementById("mainContainer").innerHTML=`Jawaban Kamu Benar`;
    createmf(`${q.value} = ${x}`,"mf");
    
  } else {
    // value = mf.value;
      document.getElementById("mainContainer").innerHTML=`
    <p>Jawaban Kamu Belum Tepat</p>
    <p class="small-text">Coba Lagi</p>   
    `;
    createmf(`${q.value} = \\placeholder[x]{      }`,"mf");
    //createmf(value,"mf");
  }
}

function cekBBKaliAkar(){
  const mfx = document.getElementById("mf");
  x = mfx.getPromptValue("x");

  if (x == (q.a*q.b)){
     document.getElementById("cekButton").style.display = "none";
    document.getElementById("mainContainer").innerHTML=`Jawaban Kamu Benar`;
    createmf(`${q.value} = \\sqrt{${x}}`,"mf");
    
  } else {
    // value = mf.value;
      document.getElementById("mainContainer").innerHTML=`
    <p>Jawaban Kamu Belum Tepat</p>
    <p class="small-text">Coba Lagi</p>   
    `;
    createmf(`${q.value} = \\sqrt{\\placeholder[x]{      }}`,"mf");
    //createmf(value,"mf");
  }
}

function cekBBBagiAkar(){
  const mfx = document.getElementById("mf");
  x = mfx.getPromptValue("x");

  if (x == (q.a/q.b)){
        document.getElementById("cekButton").style.display = "none";
    document.getElementById("mainContainer").innerHTML=`Jawaban Kamu Benar`;
    createmf(`${q.value} = \\sqrt{${x}}`,"mf");

  } else{
    document.getElementById("mainContainer").innerHTML=`
    <p>Jawaban Kamu Belum Tepat</p>
    <p class="small-text">Coba Lagi</p>   
    `;
    createmf(`${q.value} = \\sqrt{\\placeholder[x]{      }}`,"mf");
    //createmf(value,"mf");
  }
}

function cekBBKelipatan(){
  const mfx = document.getElementById("mf");
  x = mfx.getPromptValue("x");

  if (x == (q.a*q.a*q.b)){
     document.getElementById("cekButton").style.display = "none";
    document.getElementById("mainContainer").innerHTML=`Jawaban Kamu Benar`;
    createmf(`${q.value} = ${x}`,"mf");
    
  } else {
    // value = mf.value;
      document.getElementById("mainContainer").innerHTML=`
    <p>Jawaban Kamu Belum Tepat</p>
    <p class="small-text">Coba Lagi</p>   
    `;
    createmf(`${q.value} = \\placeholder[x]{      }`,"mf");
    //createmf(value,"mf");
  }
}

function soalBaru(){
  q={};
   document.getElementById("cekButton").style.display = "block";
  window[mySelect.value]();
  

  const mf = document.getElementById("mf");

  // focus the mathfield
  mf.focus();

  // move caret to the very first placeholder
  mf.executeCommand("moveToNextPlaceholder");

  mathVirtualKeyboard.show();
  }
  /*const mathField = document.createElement('math-field');
  mathField.id = "mf"
  mathField.value = `${x}^{${y}}`;
  document.getElementById("mainContainer").innerHTML="";
  document.getElementById("mainContainer").appendChild(mathField);
  */

  /*
  function loadScript(src) {
  return new Promise((resolve, reject) => {
    const script = document.createElement('script');
    script.src = src;
    script.onload = () => resolve(); 
    script.onerror = () => reject(new Error(`Error loading ${src}`));
    document.head.appendChild(script);
  });
  }

async function main() {
  await loadScript(`soal${url}.js`); 
  letsStart();
  //letsTest();
  console.log("myScript.js loaded, now proceed to next line"); 
}

*/



   
</script>
</body>
</html>
