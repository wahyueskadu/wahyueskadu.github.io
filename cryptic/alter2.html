<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cryptic Master</title>
    <style>
        :root {
            /* Neon Hacker Theme */
            --bg: #050c12;
            --box-bg: #0b161f;
            --text: #00ffcc;
            --accent: #00ffcc;
            --border: #00ffcc;
            --key-bg: #2a3b47;
            --key-text: #fff;
            --input-line: #00ffcc;
            --check-btn: #00ffcc;
            --font: 'Courier New', monospace;
        }

        [data-theme="noir"] {
            --bg: #1a1a1a;
            --box-bg: #2d2d2d;
            --text: #e0e0e0;
            --accent: #d4a373;
            --border: #404040;
            --key-bg: #444;
            --key-text: #fff;
            --input-line: #d4a373;
            --check-btn: #d4a373;
            --font: 'Georgia', serif;
        }

        [data-theme="paper"] {
            --bg: #f4f1ea;
            --box-bg: #ffffff;
            --text: #222;
            --accent: #0056b3;
            --border: #ccc;
            --key-bg: #ddd;
            --key-text: #222;
            --input-line: #222;
            --check-btn: #0056b3;
            --font: 'Arial', sans-serif;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: var(--font);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            overflow-x: hidden;
        }

        /* --- Header --- */
        .header { width: 100%; max-width: 500px; margin-bottom: 20px; font-size: 0.8rem; }
        select { background: #000; color: #fff; border: 1px solid var(--border); padding: 5px; cursor: pointer; }

        /* --- Clue --- */
        .clue-container {
            width: 100%;
            max-width: 500px;
            border: 2px solid var(--border);
            padding: 30px 20px;
            margin-bottom: 20px;
            background: var(--box-bg);
            box-shadow: 0 0 15px rgba(0, 255, 204, 0.1);
        }
        .clue-text { font-size: 1.2rem; line-height: 1.4; }

        /* --- Answer Input --- */
        .answer-area {
            display: flex;
            gap: 8px;
            margin-bottom: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .char-slot {
            width: 30px;
            height: 40px;
            border-bottom: 3px solid var(--input-line);
            font-size: 1.8rem;
            text-align: center;
            text-transform: uppercase;
            transition: all 0.2s;
        }
        .char-slot.active { border-bottom-color: #fff; transform: translateY(-2px); }

        /* --- Buttons --- */
        .btn-row { display: flex; gap: 15px; margin-bottom: 20px; width: 100%; max-width: 500px; }
        .btn {
            background: none;
            border: 2px solid var(--border);
            color: var(--text);
            padding: 12px;
            flex: 1;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            font-family: inherit;
        }
        .btn-check {
            background-color: var(--check-btn);
            color: #000;
            border: 2px solid var(--check-btn);
            box-shadow: 0 0 10px var(--check-btn);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0px var(--check-btn); }
            50% { box-shadow: 0 0 15px var(--check-btn); }
            100% { box-shadow: 0 0 0px var(--check-btn); }
        }

        /* --- Keyboard --- */
        .keyboard { width: 100%; max-width: 500px; display: flex; flex-direction: column; gap: 6px; }
        .kb-row { display: flex; justify-content: center; gap: 4px; }
        .key {
            background: var(--key-bg);
            color: var(--key-text);
            border: none;
            border-radius: 4px;
            height: 50px;
            flex: 1;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .key.wide { flex: 1.5; }

        /* --- Modal --- */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: var(--box-bg);
            border: 2px solid var(--border);
            padding: 25px;
            width: 85%;
            max-width: 400px;
            text-align: center;
        }
        .hint-btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            color: var(--text);
            cursor: pointer;
            font-family: inherit;
        }
        .hint-text { margin-top: 15px; font-style: italic; color: #fff; min-height: 20px; }
        .close-modal { margin-top: 20px; font-size: 0.8rem; cursor: pointer; text-decoration: underline; }
    </style>
</head>
<body>

    <div class="header">
        <div>8 January, 2026</div>
        <div>By Cryptic Setter</div>
        <select id="themePicker">
            <option value="default">Theme: Neon Hacker</option>
            <option value="noir">Theme: Noir Detective</option>
            <option value="paper">Theme: Plain Paper</option>
        </select>
    </div>

    <div class="clue-container">
        <p class="clue-text" id="clueDisplay"></p>
    </div>

    <div class="answer-area" id="answerGrid"></div>

    <div class="btn-row">
        <button class="btn" onclick="openModal()">Hint</button>
        <button class="btn btn-check" onclick="checkAnswer()">Check Answer</button>
    </div>

    <div class="modal" id="hintModal">
        <div class="modal-content">
            <h3>Declassify Intel</h3>
            <button class="hint-btn" onclick="revealHint('definition')">Reveal Definition</button>
            <button class="hint-btn" onclick="revealHint('indicator')">Reveal Indicator</button>
            <button class="hint-btn" onclick="revealHint('fodder')">Reveal Fodder</button>
            <div class="hint-text" id="hintResult"></div>
            <div class="close-modal" onclick="closeModal()">Return to Mission</div>
        </div>
    </div>

    <div class="keyboard" id="vk">
        <div class="kb-row">
            <button class="key" onclick="press('Q')">Q</button>
            <button class="key" onclick="press('W')">W</button>
            <button class="key" onclick="press('E')">E</button>
            <button class="key" onclick="press('R')">R</button>
            <button class="key" onclick="press('T')">T</button>
            <button class="key" onclick="press('Y')">Y</button>
            <button class="key" onclick="press('U')">U</button>
            <button class="key" onclick="press('I')">I</button>
            <button class="key" onclick="press('O')">O</button>
            <button class="key" onclick="press('P')">P</button>
        </div>
        <div class="kb-row">
            <button class="key" onclick="press('A')">A</button>
            <button class="key" onclick="press('S')">S</button>
            <button class="key" onclick="press('D')">D</button>
            <button class="key" onclick="press('F')">F</button>
            <button class="key" onclick="press('G')">G</button>
            <button class="key" onclick="press('H')">H</button>
            <button class="key" onclick="press('J')">J</button>
            <button class="key" onclick="press('K')">K</button>
            <button class="key" onclick="press('L')">L</button>
        </div>
        <div class="kb-row">
            <button class="key wide" onclick="press('ENTER')">ENT</button>
            <button class="key" onclick="press('Z')">Z</button>
            <button class="key" onclick="press('X')">X</button>
            <button class="key" onclick="press('C')">C</button>
            <button class="key" onclick="press('V')">V</button>
            <button class="key" onclick="press('B')">B</button>
            <button class="key" onclick="press('N')">N</button>
            <button class="key" onclick="press('M')">M</button>
            <button class="key wide" onclick="press('BACK')">âŒ«</button>
        </div>
    </div>

    <script>
        const puzzles = [
            {
                clue: "Some cheap arrogant bird (6)",
                answer: "PARROT",
                definition: "bird",
                indicator: "Some (Hidden word container)",
                fodder: "Inside: chea[P ARROT]gant"
            },
            {
                clue: "Recalled huge weapon (3)",
                answer: "GUM",
                definition: "weapon (slang for gun)",
                indicator: "Recalled (Reversal)",
                fodder: "MUG (Huge)"
            }
        ];

        let currentIdx = 0;
        let guess = [];

        // Initialization
        function initPuzzle() {
            const p = puzzles[currentIdx];
            document.getElementById('clueDisplay').innerText = p.clue;
            guess = [];
            const grid = document.getElementById('answerGrid');
            grid.innerHTML = '';
            for(let i=0; i<p.answer.length; i++) {
                const d = document.createElement('div');
                d.className = 'char-slot';
                grid.appendChild(d);
            }
            updateDisplay();
        }

        // Handle Input (Both Virtual and Physical)
        function press(key) {
            const p = puzzles[currentIdx];
            if (key === 'BACK' || key === 'BACKSPACE') {
                guess.pop();
            } else if (key === 'ENTER') {
                checkAnswer();
            } else if (guess.length < p.answer.length && key.length === 1 && /[A-Z]/.test(key)) {
                guess.push(key);
            }
            updateDisplay();
        }

        // Physical Keyboard Support
        document.addEventListener('keydown', (e) => {
            const key = e.key.toUpperCase();
            if (key === 'BACKSPACE' || key === 'ENTER' || /^[A-Z]$/.test(key)) {
                press(key);
            }
        });

        function updateDisplay() {
            const slots = document.querySelectorAll('.char-slot');
            slots.forEach((s, i) => {
                s.innerText = guess[i] || '';
                s.classList.toggle('active', i === guess.length);
            });
        }

        function checkAnswer() {
            const p = puzzles[currentIdx];
            if (guess.join('') === p.answer) {
                alert("Correct! Access Granted.");
                currentIdx = (currentIdx + 1) % puzzles.length;
                initPuzzle();
            } else {
                const grid = document.getElementById('answerGrid');
                grid.style.animation = 'none';
                grid.offsetHeight; /* trigger reflow */
                grid.style.animation = 'shake 0.4s';
                setTimeout(() => grid.style.animation = '', 400);
            }
        }

        // Modal Logic
        function openModal() { document.getElementById('hintModal').style.display = 'flex'; }
        function closeModal() { 
            document.getElementById('hintModal').style.display = 'none'; 
            document.getElementById('hintResult').innerText = '';
        }
        function revealHint(type) {
            const p = puzzles[currentIdx];
            document.getElementById('hintResult').innerText = p[type];
        }

        // Theme Toggle
        document.getElementById('themePicker').addEventListener('change', (e) => {
            document.body.setAttribute('data-theme', e.target.value);
        });

        initPuzzle();
    </script>
</body>
</html>